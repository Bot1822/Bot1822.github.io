<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2021/12/31/ORB%E5%8C%B9%E9%85%8D/"/>
      <url>/2021/12/31/ORB%E5%8C%B9%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="ORBç‰¹å¾"><a href="#ORBç‰¹å¾" class="headerlink" title="ORBç‰¹å¾"></a>ORBç‰¹å¾</h1><p>åŒ…å«ä»¥ä¸‹ä¸¤éƒ¨åˆ†ï¼š</p><ol><li>FASTè§’ç‚¹æå–ï¼šä¸åŸç‰ˆä¸åŒçš„æ˜¯è®¡ç®—äº†ä¸»æ–¹å‘</li><li>BRIEFæè¿°å­ï¼šä½¿ç”¨äº†å…ˆå‰è®¡ç®—çš„æ–¹å‘ä¿¡æ¯</li></ol><h2 id="FASTå…³é”®ç‚¹"><a href="#FASTå…³é”®ç‚¹" class="headerlink" title="FASTå…³é”®ç‚¹"></a>FASTå…³é”®ç‚¹</h2><p>æ£€æµ‹æ€æƒ³ï¼šå¦‚æœä¸€ä¸ªåƒç´ ä¸é‚»åŸŸåƒç´ å·®åˆ«è¾ƒå¤§ï¼Œåˆ™å¯èƒ½ä¸ºè§’ç‚¹</p><p>æ£€æµ‹è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><h2 id="BRIEFæè¿°å­"><a href="#BRIEFæè¿°å­" class="headerlink" title="BRIEFæè¿°å­"></a>BRIEFæè¿°å­</h2><h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><p>  BRIEFæä¾›äº†ä¸€ç§è®¡ç®—äºŒå€¼ä¸²çš„æ·å¾„ï¼Œè€Œå¹¶ä¸éœ€è¦å»è®¡ç®—ä¸€ä¸ªç±»ä¼¼äºSIFTçš„ç‰¹å¾æè¿°å­ã€‚å®ƒéœ€è¦å…ˆå¹³æ»‘å›¾åƒï¼Œç„¶ååœ¨ç‰¹å¾ç‚¹å‘¨å›´é€‰æ‹©ä¸€ä¸ªPatchï¼Œåœ¨è¿™ä¸ªPatchå†…é€šè¿‡ä¸€ç§é€‰å®šçš„æ–¹æ³•æ¥æŒ‘é€‰å‡ºæ¥ndä¸ªç‚¹å¯¹ã€‚ç„¶åå¯¹äºæ¯ä¸€ä¸ªç‚¹å¯¹ (p,q)ï¼Œæˆ‘ä»¬æ¥æ¯”è¾ƒè¿™ä¸¤ä¸ªç‚¹çš„äº®åº¦å€¼ï¼Œå¦‚æœ*I(p)&gt;I(q)*åˆ™è¿™ä¸ªç‚¹å¯¹ç”Ÿæˆäº†äºŒå€¼ä¸²ä¸­ä¸€ä¸ªçš„å€¼ä¸º1ï¼Œå¦‚æœ *I(p)&lt;I(q)*ï¼Œåˆ™å¯¹åº”åœ¨äºŒå€¼ä¸²ä¸­çš„å€¼ä¸º-1ï¼Œå¦åˆ™ä¸º0ã€‚æ‰€æœ‰ndä¸ªç‚¹å¯¹ï¼Œéƒ½è¿›è¡Œæ¯”è¾ƒä¹‹é—´ï¼Œæˆ‘ä»¬å°±ç”Ÿæˆäº†ä¸€ä¸ªndé•¿çš„äºŒè¿›åˆ¶ä¸²ã€‚</p><p>  å¯¹äºndçš„é€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸º128ï¼Œ256æˆ–512ï¼Œè¿™ä¸‰ç§å‚æ•°åœ¨OpenCVä¸­éƒ½æœ‰æä¾›ï¼Œä½†æ˜¯OpenCVä¸­é»˜è®¤çš„å‚æ•°æ˜¯256ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒéåŒ¹é…ç‚¹çš„æ±‰æ˜è·ç¦»å‘ˆç°å‡å€¼ä¸º128æ¯”ç‰¹å¾çš„é«˜æ–¯åˆ†å¸ƒã€‚ä¸€æ—¦ç»´æ•°é€‰å®šäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ±‰æ˜è·ç¦»æ¥åŒ¹é…è¿™äº›æè¿°å­äº†ã€‚</p><h3 id="ç‚¹å¯¹é€‰æ‹©ï¼ˆå„ç§Patternï¼‰"><a href="#ç‚¹å¯¹é€‰æ‹©ï¼ˆå„ç§Patternï¼‰" class="headerlink" title="ç‚¹å¯¹é€‰æ‹©ï¼ˆå„ç§Patternï¼‰"></a>ç‚¹å¯¹é€‰æ‹©ï¼ˆå„ç§Patternï¼‰</h3><p>è®¾æˆ‘ä»¬åœ¨ç‰¹å¾ç‚¹çš„é‚»åŸŸå—å¤§å°ä¸ºSÃ—Så†…é€‰æ‹©ndä¸ªç‚¹å¯¹(p,q)ï¼ŒCalonderçš„å®éªŒä¸­æµ‹è¯•äº†5ç§é‡‡æ ·æ–¹æ³•ï¼š</p><p>1ï¼‰åœ¨å›¾åƒå—å†…å¹³å‡é‡‡æ ·ï¼›</p><p>2ï¼‰på’Œqéƒ½ç¬¦åˆ$\left ( 0,\frac{1}{25}S^2  \right )$çš„é«˜æ–¯åˆ†å¸ƒï¼›</p><p>3ï¼‰pç¬¦åˆ$\left ( 0,\frac{1}{25}S^2  \right )$çš„é«˜æ–¯åˆ†å¸ƒï¼Œè€Œqç¬¦åˆ$\left ( 0,\frac{1}{100}S^2  \right )$çš„é«˜æ–¯åˆ†å¸ƒï¼›</p><p>4ï¼‰åœ¨ç©ºé—´é‡åŒ–æåæ ‡ä¸‹çš„ç¦»æ•£ä½ç½®éšæœºé‡‡æ ·</p><p>5ï¼‰æŠŠpå›ºå®šä¸º$(0,0)$ï¼Œqåœ¨å‘¨å›´å¹³å‡é‡‡æ ·</p><p>ä¸‹é¢æ˜¯ä¸Šé¢5ç§é‡‡æ ·æ–¹æ³•çš„ç»“æœç¤ºæ„å›¾ã€‚</p><p><img src=".%5Ctemp%5C071515564565603.png" class="lazyload placeholder" data-srcset=".%5Ctemp%5C071515564565603.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image"></p><p><img src=".%5Ctemp%5C071516017849941.png" class="lazyload placeholder" data-srcset=".%5Ctemp%5C071516017849941.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image"></p><h1 id="åŒ¹é…ï¼ˆåŸºäºcvçš„Matcherï¼‰"><a href="#åŒ¹é…ï¼ˆåŸºäºcvçš„Matcherï¼‰" class="headerlink" title="åŒ¹é…ï¼ˆåŸºäºcvçš„Matcherï¼‰"></a>åŒ¹é…ï¼ˆåŸºäºcvçš„Matcherï¼‰</h1><h2 id="æ±‰æ˜è·ç¦»ï¼ˆHamming-distanceï¼‰"><a href="#æ±‰æ˜è·ç¦»ï¼ˆHamming-distanceï¼‰" class="headerlink" title="æ±‰æ˜è·ç¦»ï¼ˆHamming distanceï¼‰"></a>æ±‰æ˜è·ç¦»ï¼ˆHamming distanceï¼‰</h2><p>ç”¨æ±‰æ˜è·ç¦»ï¼ˆHamming distanceï¼‰ä½œä¸ºä¸¤ä¸ªäºŒè¿›åˆ¶ä¸²ä¹‹é—´çš„è·ç¦»ï¼ˆå·®å¼‚ï¼‰ï¼ŒæŒ‡ä¸åŒä½æ•°çš„ä¸ªæ•°ã€‚è¿™ä¸ªåœ¨è®¡ç®—æœºç¡¬ä»¶å±‚é¢å¯ä»¥ç›´æ¥ç”¨å¼‚æˆ–å®ç°ï¼Œå¾ˆå‹å¥½ã€‚</p><p>åœ¨ä¿¡æ¯è®ºä¸­ï¼Œä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸²ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹åº”ä½ç½®çš„ä¸åŒå­—ç¬¦çš„ä¸ªæ•°ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå°±æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²å˜æ¢æˆå¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æ‰€éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼š</p><p>â€‹    1011101 ä¸ 1001001 ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 2ã€‚<br>â€‹    2143896 ä¸ 2233796 ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 3ã€‚<br>â€‹    â€œtonedâ€ ä¸ â€œrosesâ€ ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 3ã€‚</p><p>è¦å†³å®šæœ‰å¤šå°‘ä¸ªä½ä¸åŒï¼Œåªéœ€å°† xor è¿ç®—åŠ è¯¸äºä¸¤ä¸ªå­—ç å°±å¯ä»¥ï¼Œå¹¶åœ¨ç»“æœä¸­è®¡ç®—æœ‰å¤šä¸ªä¸º1çš„ä½ã€‚ä¸¤ä¸ªå­—ç ä¸­ä¸åŒä½å€¼çš„æ•°ç›®ç§°ä¸ºæ±‰æ˜è·ç¦»(Hamming distance) ã€‚</p><h2 id="OpenCVä¸­çš„Matcher"><a href="#OpenCVä¸­çš„Matcher" class="headerlink" title="OpenCVä¸­çš„Matcher"></a>OpenCVä¸­çš„Matcher</h2><p>ç‰¹å¾ç‚¹åŒ¹é…ä½äºfeature2Dçš„æ¨¡å—ä¸­æ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™åº”è¯¥åœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;opencv2&#x2F;features2d&#x2F;features2d.hpp&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¨¡å—ä¸­æœ‰ä¸‰ä¸ªç±»</p><p><img src=".%5Ctemp%5CSouthEast" class="lazyload placeholder" data-srcset=".%5Ctemp%5CSouthEast" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src=".%5Ctemp%5Cmatcher%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB" class="lazyload placeholder" data-srcset=".%5Ctemp%5Cmatcher%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><h3 id="cv-DescriptorMatcher"><a href="#cv-DescriptorMatcher" class="headerlink" title="cv::DescriptorMatcher"></a>cv::DescriptorMatcher</h3><p>DescriptorMatcherçš„ç±»å‹ï¼š</p><p><img src=".%5Ctemp%5Cimage-20211230150851427.png" class="lazyload placeholder" data-srcset=".%5Ctemp%5Cimage-20211230150851427.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211230150851427"></p><p>å¯ä»¥<strong>ç›´æ¥ä½¿ç”¨ DescriptorMatcher</strong>ï¼Œå‚æ•°å¦‚ä¸Šå›¾ğŸ‘†ï¼Œç¤ºä¾‹å¦‚ä¸‹ğŸ‘‡</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F;BFMatcher æš´åŠ›åŒ¹é…    vector&lt;DMatch&gt; BFmatches;    Ptr&lt;DescriptorMatcher&gt; BFMatcher &#x3D; DescriptorMatcher::create(&quot;BruteForce-Hamming&quot;);    &#x2F;&#x2F;Ptr&lt;BFMatcher&gt; Bmatcher &#x3D; BFMatcher::create();    BFMatcher-&gt;match(descriptors1, descriptors2, BFmatches);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="cv-BFMatcher"><a href="#cv-BFMatcher" class="headerlink" title="cv::BFMatcher"></a>cv::BFMatcher</h3><p><strong>Brute-ForceåŒ¹é…å™¨</strong>å¾ˆç®€å•ï¼Œå®ƒå–ç¬¬ä¸€ä¸ªé›†åˆé‡Œçš„ä¸€ä¸ªç‰¹å¾çš„æè¿°å­ä¸ç¬¬äºŒä¸ªé›†åˆé‡Œæ‰€æœ‰å…¶ä»–ç‰¹å¾å’Œå®ƒé€šè¿‡ä¸€äº›è·ç¦»è®¡ç®—è¿›è¡ŒåŒ¹é…ï¼Œè¿”å›åŒ¹é…æœ€è¿‘çš„å€¼ã€‚</p><p>å¯¹äºBFåŒ¹é…å™¨ï¼ŒOPENCVä¸­é¦–å…ˆå¾—ç”¨ BFMatcher ç±»åˆ›å»º BF åŒ¹é…å™¨å¯¹è±¡ï¼Œå®ƒå¯å–ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ normTypeï¼Œå®ƒæŒ‡å®šè¦ä½¿ç”¨çš„è·ç¦»é‡åº¦ã€‚é»˜è®¤æ˜¯NORM_L2ã€‚å¯¹äºSIFT,SURFå¾ˆå¥½ã€‚ï¼ˆè¿˜æœ‰NORM_L1ï¼‰ã€‚å¯¹äºäºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„æè¿°å­ï¼Œæ¯”å¦‚ORBï¼ŒBRIEFï¼ŒBRISKç­‰ï¼Œåº”è¯¥ç”¨NORM_HAMMINGã€‚ä½¿ç”¨Hammingè·ç¦»åº¦é‡ï¼Œå¦‚æœORBä½¿ç”¨VTA_K == 3æˆ–è€…4ï¼Œåº”è¯¥ç”¨NORM_HAMMING2ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¸ƒå°”å˜é‡ï¼ŒcrossCheck é»˜è®¤å€¼æ˜¯falseã€‚å¦‚æœè®¾ç½®ä¸ºTrueï¼ŒåŒ¹é…æ¡ä»¶å°±ä¼šæ›´åŠ ä¸¥æ ¼ï¼Œåªæœ‰åˆ°Aä¸­çš„ç¬¬iä¸ªç‰¹å¾ç‚¹ä¸Bä¸­çš„ç¬¬jä¸ªç‰¹å¾ç‚¹è·ç¦»æœ€è¿‘ï¼Œå¹¶ä¸”Bä¸­çš„ç¬¬jä¸ªç‰¹å¾ç‚¹åˆ°Aä¸­çš„ç¬¬iä¸ªç‰¹å¾ç‚¹ä¹Ÿæ˜¯æœ€è¿‘æ—¶æ‰ä¼šè¿”å›æœ€ä½³åŒ¹é…(i,j)ï¼Œ å³è¿™ä¸¤ä¸ªç‰¹å¾ç‚¹è¦äº’ç›¸åŒ¹é…æ‰è¡Œã€‚</p><p>BFMatcherå¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³• BFMatcher.match() å’Œ BFMatcher.knnMatch()ã€‚ç¬¬ä¸€ä¸ªæ–¹æ³•ä¼šè¿”å›æœ€ä½³åŒ¹é…ã€‚ç¬¬äºŒä¸ªæ–¹æ³•ä¸ºæ¯ä¸ªå…³é”®ç‚¹è¿”å›kä¸ªæœ€ä½³åŒ¹é…ï¼Œå…¶ä¸­kæ˜¯ç”±ç”¨æˆ·è®¾å®šçš„ã€‚</p><h3 id="cv-FlannBasedMatcher"><a href="#cv-FlannBasedMatcher" class="headerlink" title="cv::FlannBasedMatcher"></a>cv::FlannBasedMatcher</h3><p><strong>Flann-based matcher</strong> ä½¿ç”¨å¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ç®—æ³•å¯»æ‰¾ï¼ˆç”¨å¿«é€Ÿçš„ç¬¬ä¸‰æ–¹åº“è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ç®—æ³•ï¼‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ğŸ‘‡</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F;FlannBasedMatcherï¼š    vector&lt;DMatch&gt; FlannMatches;    Ptr&lt;FlannBasedMatcher&gt; FlannMatcher &#x3D; FlannBasedMatcher::create();    FlannMatcher-&gt;match(descriptors1, descriptors2, FlannMatches);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸¤ç§æ–¹æ³•çš„æ¯”è¾ƒ</p><p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºBFMatcheræ€»æ˜¯å°è¯•æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ï¼Œä»è€Œä½¿å¾—å®ƒæ€»èƒ½å¤Ÿæ‰¾åˆ°æœ€ä½³åŒ¹é…ï¼Œè¿™ä¹Ÿæ˜¯Brute Forceï¼ˆæš´åŠ›æ³•ï¼‰çš„åŸå§‹å«ä¹‰ã€‚è€ŒFlannBasedMatcherä¸­FLANNçš„å«ä¹‰æ˜¯Fast Library for Approximate Nearest Neighborsï¼Œä»å­—é¢æ„æ€å¯çŸ¥å®ƒæ˜¯ä¸€ç§è¿‘ä¼¼æ³•ï¼Œç®—æ³•æ›´å¿«ä½†æ˜¯æ‰¾åˆ°çš„æ˜¯æœ€è¿‘é‚»è¿‘ä¼¼åŒ¹é…ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªç›¸å¯¹å¥½çš„åŒ¹é…ä½†æ˜¯ä¸éœ€è¦æœ€ä½³åŒ¹é…çš„æ—¶å€™å¾€å¾€ä½¿ç”¨FlannBasedMatcherã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡è°ƒæ•´FlannBasedMatcherçš„å‚æ•°æ¥æé«˜åŒ¹é…çš„ç²¾åº¦æˆ–è€…æé«˜ç®—æ³•é€Ÿåº¦ï¼Œä½†æ˜¯ç›¸åº”åœ°ç®—æ³•é€Ÿåº¦æˆ–è€…ç®—æ³•ç²¾åº¦ä¼šå—åˆ°å½±å“ã€‚</p><p>æ­¤å¤–ï¼Œä½¿ç”¨ç‰¹å¾æå–è¿‡ç¨‹å¾—åˆ°çš„ç‰¹å¾æè¿°ç¬¦ï¼ˆdescriptorï¼‰æ•°æ®ç±»å‹æœ‰çš„æ˜¯floatç±»å‹çš„ï¼Œæ¯”å¦‚SurfDescriptorExtractorï¼ŒSiftDescriptorExtractorã€‚æœ‰çš„æ˜¯ucharç±»å‹çš„ï¼Œæ¯”å¦‚è¯´æœ‰ORBï¼ŒBriefDescriptorExtractorã€‚å¯¹åº”ucharç±»å‹çš„åŒ¹é…æ–¹å¼åªæœ‰BruteForceï¼ˆå¤§æ¦‚ï¼Ÿï¼‰ã€‚æ‰€ä»¥ORBå’ŒBRIEFç‰¹å¾æè¿°å­åªèƒ½ä½¿ç”¨BruteForceåŒ¹é…æ³•ã€‚</p><h2 id="åŒ¹é…ä¼˜åŒ–"><a href="#åŒ¹é…ä¼˜åŒ–" class="headerlink" title="åŒ¹é…ä¼˜åŒ–"></a>åŒ¹é…ä¼˜åŒ–</h2><p>åœ¨æ¯”å¯¹æè¿°å€¼ç›¸ä¼¼åº¦çš„æ–¹æ³•ä¸­ï¼Œæœ€ç®€å•ç›´è§‚çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨æš´åŠ›åŒ¹é…æ–¹æ³•(Brute-Froce Matcher)ï¼Œå³è®¡ç®—æŸä¸€ä¸ªç‰¹å¾ç‚¹æè¿°å­ä¸å…¶ä»–æ‰€æœ‰ç‰¹å¾ç‚¹æè¿°å­ä¹‹é—´çš„è·ç¦»ï¼Œç„¶åå°†å¾—åˆ°çš„è·ç¦»è¿›è¡Œæ’åºï¼Œå–è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªä½œä¸ºåŒ¹é…ç‚¹ã€‚è¿™ç§æ–¹æ³•ç®€å•ç²—æš´ï¼Œå…¶ç»“æœä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä½†ä¹Ÿå¯èƒ½æœ‰å¤§é‡çš„é”™è¯¯åŒ¹é…ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨ä¸€äº›æœºåˆ¶æ¥è¿‡æ»¤æ‰é”™è¯¯çš„åŒ¹é…ã€‚</p><h3 id="1-æ±‰æ˜è·ç¦»å°äºæœ€å°è·ç¦»çš„ä¸¤å€"><a href="#1-æ±‰æ˜è·ç¦»å°äºæœ€å°è·ç¦»çš„ä¸¤å€" class="headerlink" title="1. æ±‰æ˜è·ç¦»å°äºæœ€å°è·ç¦»çš„ä¸¤å€"></a>1. æ±‰æ˜è·ç¦»å°äºæœ€å°è·ç¦»çš„ä¸¤å€</h3><p>ç»å…¸çš„æ–¹æ³•æœ‰æ±‰æ˜è·ç¦»å°äºæœ€å°è·ç¦»çš„ä¸¤å€ï¼Œé€‰æ‹©å·²ç»åŒ¹é…çš„ç‚¹å¯¹çš„æ±‰æ˜è·ç¦»ä¸å¤§äºæœ€å°è·ç¦»çš„ä¸¤å€ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼Œå¦‚æœä¸å¤§äºè¯¥å€¼åˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªæ­£ç¡®çš„åŒ¹é…ï¼›å¤§äºè¯¥å€¼åˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªé”™è¯¯çš„åŒ¹é…ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F; åŒ¹é…å¯¹ç­›é€‰double min_dist &#x3D; 1000, max_dist &#x3D; 0;&#x2F;&#x2F; æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ä¹‹é—´çš„æœ€å¤§å€¼å’Œæœ€å°å€¼for (int i &#x3D; 0; i &lt; descriptors1.rows; i++)&#123;    double dist &#x3D; matches[i].distance;    if (dist &lt; min_dist) min_dist &#x3D; dist;    if (dist &gt; max_dist) max_dist &#x3D; dist;&#125;&#x2F;&#x2F; å½“æè¿°å­ä¹‹é—´çš„åŒ¹é…å¤§äº2å€çš„æœ€å°è·ç¦»æ—¶ï¼Œå³è®¤ä¸ºè¯¥åŒ¹é…æ˜¯ä¸€ä¸ªé”™è¯¯çš„åŒ¹é…ã€‚&#x2F;&#x2F; ä½†æœ‰æ—¶æè¿°å­ä¹‹é—´çš„æœ€å°è·ç¦»éå¸¸å°ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªç»éªŒå€¼ä½œä¸ºä¸‹é™vector&lt;DMatch&gt; good_matches;for (int i &#x3D; 0; i &lt; descriptors1.rows; i++)&#123;    if (matches[i].distance &lt;&#x3D; max(2 * min_dist, 30.0))        good_matches.push_back(matches[i]);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-äº¤å‰åŒ¹é…ï¼ˆBFMatcherçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥å®ç°ï¼‰"><a href="#2-äº¤å‰åŒ¹é…ï¼ˆBFMatcherçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥å®ç°ï¼‰" class="headerlink" title="2. äº¤å‰åŒ¹é…ï¼ˆBFMatcherçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥å®ç°ï¼‰"></a>2. äº¤å‰åŒ¹é…ï¼ˆBFMatcherçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥å®ç°ï¼‰</h3><p>é’ˆå¯¹æš´åŠ›åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰åŒ¹é…çš„æ–¹æ³•æ¥è¿‡æ»¤é”™è¯¯çš„åŒ¹é…ã€‚äº¤å‰è¿‡æ»¤çš„æ€æƒ³æ˜¯å†è¿›è¡Œä¸€æ¬¡åŒ¹é…ï¼Œåè¿‡æ¥ä½¿ç”¨è¢«åŒ¹é…åˆ°çš„ç‚¹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°çš„ä»ç„¶æ˜¯ç¬¬ä¸€æ¬¡åŒ¹é…çš„ç‚¹çš„è¯ï¼Œå°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ­£ç¡®çš„åŒ¹é…ã€‚ä¸¾ä¾‹æ¥è¯´å°±æ˜¯ï¼Œå‡å¦‚ç¬¬ä¸€æ¬¡ç‰¹å¾ç‚¹Aä½¿ç”¨æš´åŠ›åŒ¹é…çš„æ–¹æ³•ï¼ŒåŒ¹é…åˆ°çš„ç‰¹å¾ç‚¹æ˜¯ç‰¹å¾ç‚¹Bï¼›åè¿‡æ¥ï¼Œä½¿ç”¨ç‰¹å¾ç‚¹Bè¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°çš„ä»ç„¶æ˜¯ç‰¹å¾ç‚¹Aï¼Œåˆ™å°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ­£ç¡®çš„åŒ¹é…ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„åŒ¹é…ã€‚OpenCVä¸­BFMatcherå·²ç»å°è£…äº†è¯¥æ–¹æ³•ï¼Œåˆ›å»ºBFMatcherçš„å®ä¾‹æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥trueå³å¯ï¼ŒBFMatcher bfMatcher(NORM_HAMMING,true)ã€‚</p><h3 id="3-KNNåŒ¹é…"><a href="#3-KNNåŒ¹é…" class="headerlink" title="3. KNNåŒ¹é…"></a>3. KNNåŒ¹é…</h3><p>åœ¨åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æ’é™¤å› ä¸ºå›¾åƒé®æŒ¡å’ŒèƒŒæ™¯æ··ä¹±è€Œäº§ç”Ÿçš„æ— åŒ¹é…å…³ç³»çš„å…³é”®ç‚¹ï¼ŒSIFTçš„ä½œè€…Loweæå‡ºäº†æ¯”è¾ƒæœ€è¿‘é‚»è·ç¦»ä¸æ¬¡è¿‘é‚»è·ç¦»çš„SIFTåŒ¹é…æ–¹å¼ï¼šå–ä¸€å¹…å›¾åƒä¸­çš„ä¸€ä¸ªSIFTå…³é”®ç‚¹ï¼Œå¹¶æ‰¾å‡ºå…¶ä¸å¦ä¸€å¹…å›¾åƒä¸­æ¬§å¼è·ç¦»æœ€è¿‘çš„å‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œåœ¨è¿™ä¸¤ä¸ªå…³é”®ç‚¹ä¸­ï¼Œå¦‚æœæœ€è¿‘çš„è·ç¦»é™¤ä»¥æ¬¡è¿‘çš„è·ç¦»å¾—åˆ°çš„æ¯”ç‡ratioå°‘äºæŸä¸ªé˜ˆå€¼Tï¼Œåˆ™æ¥å—è¿™ä¸€å¯¹åŒ¹é…ç‚¹ã€‚å› ä¸ºå¯¹äºé”™è¯¯åŒ¹é…ï¼Œç”±äºç‰¹å¾ç©ºé—´çš„é«˜ç»´æ€§ï¼Œç›¸ä¼¼çš„è·ç¦»å¯èƒ½æœ‰å¤§é‡å…¶ä»–çš„é”™è¯¯åŒ¹é…ï¼Œä»è€Œå®ƒçš„ratioå€¼æ¯”è¾ƒé«˜ã€‚æ˜¾ç„¶é™ä½è¿™ä¸ªæ¯”ä¾‹é˜ˆå€¼Tï¼ŒSIFTåŒ¹é…ç‚¹æ•°ç›®ä¼šå‡å°‘ï¼Œä½†æ›´åŠ ç¨³å®šï¼Œåä¹‹äº¦ç„¶ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const float minRatio &#x3D; 1.f &#x2F; 1.5f;const int k &#x3D; 2; vector&lt;vector&lt;DMatch&gt;&gt; knnMatches;matcher-&gt;knnMatch(leftPattern-&gt;descriptors, rightPattern-&gt;descriptors, knnMatches, k); for (size_t i &#x3D; 0; i &lt; knnMatches.size(); i++) &#123;    const DMatch&amp; bestMatch &#x3D; knnMatches[i][0];    const DMatch&amp; betterMatch &#x3D; knnMatches[i][1];     float  distanceRatio &#x3D; bestMatch.distance &#x2F; betterMatch.distance;    if (distanceRatio &lt; minRatio)        matches.push_back(bestMatch);&#125;const  float minRatio &#x3D;  1.f  &#x2F;  1.5f;const  int k &#x3D;  2; vector&lt;vector&lt;DMatch&gt;&gt; knnMatches;matcher-&gt;knnMatch(leftPattern-&gt;descriptors, rightPattern-&gt;descriptors, knnMatches, 2); for (size_t i &#x3D;  0; i &lt; knnMatches.size(); i++) &#123;    const DMatch&amp; bestMatch &#x3D; knnMatches[i][0];    const DMatch&amp; betterMatch &#x3D; knnMatches[i][1];    float distanceRatio &#x3D; bestMatch.distance  &#x2F; betterMatch.distance;    if (distanceRatio &lt; minRatio)        matches.push_back(bestMatch);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-é€šè¿‡RANSACå¯»æ‰¾å•åº”æ€§çŸ©é˜µçš„æ–¹æ³•"><a href="#4-é€šè¿‡RANSACå¯»æ‰¾å•åº”æ€§çŸ©é˜µçš„æ–¹æ³•" class="headerlink" title="4. é€šè¿‡RANSACå¯»æ‰¾å•åº”æ€§çŸ©é˜µçš„æ–¹æ³•"></a>4. é€šè¿‡RANSACå¯»æ‰¾å•åº”æ€§çŸ©é˜µçš„æ–¹æ³•</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/ICP/"/>
      <url>/2021/12/31/ICP/</url>
      
        <content type="html"><![CDATA[<h1 id="3d-3dé—®é¢˜"><a href="#3d-3dé—®é¢˜" class="headerlink" title="3d-3dé—®é¢˜"></a>3d-3dé—®é¢˜</h1><h2 id="ICP"><a href="#ICP" class="headerlink" title="ICP"></a>ICP</h2><p>Iterative Closest Point<br>ä¸€ä¸ªç®€å•çš„æœ€å°äºŒä¹˜é—®é¢˜<br>ä¿¡æ¯é‡æ˜¯å…³é”®ï¼Œå¯ä»¥è§åˆ°ä»2d-2dçš„å…«ç‚¹åˆ°3d-2dçš„p3pï¼Œé€æ¸ä»èƒ½å¦æ±‚è§£çš„é—®é¢˜å˜æˆä¼˜åŒ–é—®é¢˜</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/3D-3D/"/>
      <url>/2021/12/31/3D-3D/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/3D-2D/"/>
      <url>/2021/12/31/3D-2D/</url>
      
        <content type="html"><![CDATA[<p>å¼•å‡ºï¼š</p><p>2D-2Dçš„å¯¹æå‡ ä½•éœ€è¦8ä¸ªä»¥ä¸Šç‚¹å¯¹ï¼Œä¸”å­˜åœ¨åˆå§‹åŒ–ã€çº¯æ—‹è½¬å’Œå°ºåº¦é—®é¢˜ã€‚</p><p>ç‰¹å¾ç‚¹3Dä½ç½®å¯ä»¥ç”±ä¸‰è§’åŒ–æˆ–RGB-Dç›¸æœºæ·±åº¦å›¾ç¡®å®šã€‚</p><p>å› æ­¤ï¼ŒåŒç›®æˆ–RGB-Dç›¸æœºç›´æ¥ä½¿ç”¨PnPä¼°è®¡ç›¸æœºè¿åŠ¨ã€‚å•ç›®è§†è§‰é‡Œç¨‹è®¡ï¼Œé¦–å…ˆåˆå§‹åŒ–ï¼Œç„¶åæ‰èƒ½PnPã€‚</p><p>PnPä¸ºï¼ˆ Perspective-n-Pointï¼‰çš„ç®€ç§°ï¼Œå³ç»™å‡ºnä¸ª3Dç©ºé—´ç‚¹åŠå…¶æŠ•å½±ä½ç½®æ—¶ï¼Œå¦‚ä½•æ±‚è§£ç›¸æœºçš„ä½å§¿R tã€‚</p><p>PnPä¼˜ç‚¹ï¼šä¸éœ€è¦å¯¹æçº¦æŸï¼Œ3ä¸ªçš„åŒ¹é…ç‚¹å¯¹å°±å¯ä»¥è¿åŠ¨ä¼°è®¡ã€‚</p><p>å†…å®¹ï¼š</p><p>ç›´æ¥çº¿æ€§å˜æ¢ï¼ˆDLTï¼‰</p><p>P3PåŠå®ç°</p><p>BAï¼ˆBundle Adjustmentï¼‰åŠå®ç°</p><p>ä¸€ã€DLT</p><p>æ¯ä¸ªç‰¹å¾ç‚¹å¯¹æä¾›ä¸¤ä¸ªå…³äºtçš„çº¿æ€§çº¦æŸï¼Œt ä¸€å…±12ç»´ï¼Œè‡³å°‘éœ€è¦6ä¸ªç‰¹å¾ç‚¹å¯¹å®ç°Tçš„çº¿æ€§æ±‚è§£ã€‚<br>åŒ¹é…ç‚¹æ•°å¤§äº6ï¼ŒSVDæœ€å°äºŒä¹˜è§£ã€‚<br>ç¼ºç‚¹ï¼šTçŸ©é˜µçœ‹æˆ12ä¸ªæœªçŸ¥æ•°ï¼Œå¿½ç•¥äº†ä»–ä»¬ä¹‹é—´çš„è”ç³»ã€‚</p><p>äºŒã€P3P<br>1ã€åŸç†ï¼šåˆ©ç”¨äº†ä¸‰è§’å½¢ç›¸ä¼¼ï¼Œæ±‚è§£æŠ•å½±ç‚¹abcåœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„3Dåæ ‡ï¼Œç„¶åå°†é—®é¢˜è½¬ä¸º3D-3Dé—®é¢˜ã€‚</p><p>åœ¨SLAMå®ç”¨ï¼šå…ˆP3Pä¼°è®¡ç›¸æœºä½å§¿R tï¼Œ ä¹‹åæ„å»ºæœ€å°äºŒä¹˜ä¼˜åŒ–é—®é¢˜å¯¹ä¼°è®¡å€¼è¿›è¡Œè°ƒæ•´ã€‚</p><p>2ã€ä»£ç å®ç°<br>è°ƒç”¨solvePnPå‡½æ•°<br>bool cv::solvePnP(objectPoints,imagePoints,cameraMatrix,distCoeffs,<br>OutputArray r, OutputArray t,<br>bool useExtrinsicGuess = false,int flags = SOLVEPNP_ITERATIVE )<br>objectPoints    Array of object points in the ä¸–ç•Œåæ ‡ç³», Nx3 1-channel or 1xN/Nx1 3-channel, where N is the number of points. vector<Point3f>  pts_3d<br>imagePoints    Array of corresponding ç¬¬äºŒå¼ å›¾çš„åƒç´ åæ ‡, Nx2 1-channel or 1xN/Nx1 2-channel, where N is the number of points. vector<Point2f> pts_2d<br>cameraMatrix    Input camera matrix K<br>distCoeffs    Input vector of distortion coefficients (k1,k2,p1,p2[,k3[,k4,k5,k6[,s1,s2,s3,s4[,Ï„x,Ï„y]]]]) of 4, 5, 8, 12 or 14 elements. If the vector is NULL/empty, the zero distortion coefficients are assumed.<br>rvec    Output æ—‹è½¬å‘é‡ (see Rodrigues ) that, together with tvec , brings points from the model coordinate system to the camera coordinate system.éœ€è¦ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼åŒ–ä¸ºæ—‹è½¬çŸ©é˜µ<br>tvec    Output translation vector.<br>useExtrinsicGuess    Parameter used for SOLVEPNP_ITERATIVE. If true (1), the function uses the provided rvec and tvec values as initial approximations of the rotation and translation vectors, respectively, and further optimizes them<br>ç¼ºç‚¹ï¼šP3Påªåˆ©ç”¨äº†3ä¸ªç‚¹ä¿¡æ¯<br>å¦‚æœ3Dæˆ–2Dç‚¹å—åˆ°å™ªå£°å½±å“ï¼Œæˆ–è€…è¯¯åŒ¹é…ï¼Œç®—æ³•å¤±æ•ˆã€‚<br> ä¸»æ¡†æ¶</p><p>#include <iostream><br>#include <vector><br>#include &lt;opencv2/opencv.hpp&gt;<br>using namespace std;<br>using namespace cv;</p><p>void find_feature_matches(<br>    const Mat&amp; img_1, const Mat&amp; img_2,<br>    std::vector<KeyPoint>&amp; keypoints_1,<br>    std::vector<KeyPoint>&amp; keypoints_2,<br>    std::vector&lt; DMatch &gt;&amp; matches);</p><p>Point2d pixel2cam(const Point2d&amp; p, const Mat&amp; K);</p><p>void bundleAdjustment(<br>    const vector<Point3f> points_3d,<br>    const vector<Point2f> points_2d,<br>    const Mat&amp; K,<br>    Mat&amp; R, Mat&amp; t<br>    );<br>int main()<br>{<br>    Mat img1 = imread(â€œ1.pngâ€);<br>    Mat img2 = imread(â€œ2.pngâ€);<br>    Mat d1 = imread(â€œ1_depth.pngâ€);       // æ·±åº¦å›¾ä¸º16ä½æ— ç¬¦å·æ•°ï¼Œå•é€šé“å›¾åƒ<br>    //1. æ‰¾åˆ°ç‰¹å¾ç‚¹å’ŒåŒ¹é…å…³ç³»<br>    vector<KeyPoint> keypoint1, keypoint2;<br>    vector<DMatch> matches;<br>    find_feature_matches(img1,img2,keypoint1,keypoint2,matches);</p><pre><code>Mat K = (Mat_&lt;double&gt;(3, 3) &lt;&lt; 520.9, 0, 325.1, 0, 521.0, 249.7, 0, 0, 1);//2. ç¬¬ä¸€å¼ å›¾åƒç»™å‡º3Dåæ ‡ï¼Œç¬¬äºŒå¼ ç»™åƒç´ 2dåæ ‡vector&lt;Point3f&gt; pts_3d;vector&lt;Point2f&gt; pts_2d;for (DMatch m : matches)&#123;     //3. 3Dåæ ‡ç”±ç¬¬ä¸€å¼ çš„åƒç´ åæ ‡è½¬ä¸ºç›¸æœºåæ ‡ï¼Œå†ä¹˜ä¸Šæ·±åº¦ï¼Œä¸ºä¸–ç•Œåæ ‡    ushort d = d1.ptr&lt;unsigned short&gt; (int(keypoint1[m.queryIdx].pt.y))[int (keypoint1[m.queryIdx].pt.x)];    d = d / 1000;    Point2d p1 = pixel2cam(keypoint1[m.queryIdx].pt, K);    Point3f p2(p1.x*d, p1.y*d, d);    pts_3d.push_back(p2);    pts_2d.push_back(keypoint2[m.trainIdx].pt);    cout &lt;&lt; &quot;3d-2d pairs&quot; &lt;&lt; pts_3d.size() &lt;&lt; endl;    //4. è°ƒç”¨å‡½æ•°p3pï¼Œæ±‚è§£rï¼Œt    Mat R,r, t;    solvePnP(pts_3d, pts_2d, K, Mat(), r, t, false, SOLVEPNP_EPNP);    Rodrigues(r, R); &#125;</code></pre><p>}<br> æ³¨è§£ï¼š<br>Mat d1 = imread(â€œ1_depth.pngâ€);<br>ushort d = d1.ptr<unsigned short> (int(keypoint1[m.queryIdx].pt.y))[int(keypoint1[m.queryIdx].pt.x)];<br>d1æ˜¯æ·±åº¦å›¾ï¼ŒMatç±»å‹çš„ptræ˜¯æŒ‡é’ˆï¼Œè·å¾—åƒç´ ç‚¹æ·±åº¦ï¼Œé¦–å…ˆå¾—åˆ°è¡Œåœ°å€ï¼Œä¹‹ååˆ—æŒ‡é’ˆ  (pt.y)[pt.x]</p><p>ç¬¬ä¸€å¼ å›¾åƒç»™å‡º3Dåæ ‡ï¼Œç¬¬äºŒå¼ ç»™åƒç´ 2dåæ ‡; å…¶ä¸­3Dåæ ‡ç”±ç¬¬ä¸€å¼ çš„åƒç´ åæ ‡è½¬ä¸ºç›¸æœºåæ ‡ï¼Œå†ä¹˜ä¸Šæ·±åº¦ï¼Œä¸ºä¸–ç•Œåæ ‡ã€‚</p><p>Rodrigues(r, R);<br>solvepnpå¾—åˆ°çš„æ˜¯æ—‹è½¬å‘é‡rï¼Œéœ€è¦é€šè¿‡ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¢ä¸ºæ—‹è½¬çŸ©é˜µRã€‚å³æä»£æ•°å‘æç¾¤çš„è½¬æ¢ã€‚</p><p>ä¸‰ã€BA<br>è¿™ç§ä¼˜åŒ–æ–¹æ³•ç”¨åœ¨SLAMä¸Šæ—¶ç§°ä¸ºé›†æŸè°ƒæ•´ï¼ˆBundle Adjustmentï¼ŒBAï¼‰ã€‚</p><p>â€œé›†æŸè°ƒæ•´â€åç§°çš„å«ä¹‰æ˜¯è¯´ï¼Œé€šè¿‡è°ƒæ•´ç›¸æœºçš„å§¿æ€ä½¿3Dè·¯æ ‡ç‚¹å‘å‡ºçš„å…‰çº¿éƒ½èƒ½æ±‡èšåˆ°ç›¸æœºçš„å…‰å¿ƒã€‚</p><p>å›é¡¾g2oå›¾ä¼˜åŒ–åº“ï¼Œä¼˜åŒ–å˜é‡ä½œä¸ºé¡¶ç‚¹ï¼Œè¯¯å·®é¡¹ä½œä¸ºå˜ï¼Œæ„é€ ä¸€ä¸ªå›¾ã€‚</p><p>æœ¬èŠ‚ï¼Œé¡¶ç‚¹æ˜¯3Dåæ ‡(XYZ)å’Œç›¸æœºä½å§¿R t,è¯¯å·®é¡¹æ˜¯é‡æŠ•å½±è¯¯å·®ã€‚æŠŠé—®é¢˜å»ºæ¨¡æˆä¸€ä¸ªæœ€å°äºŒä¹˜çš„å›¾ä¼˜åŒ–é—®é¢˜ã€‚</p><p>void bundleAdjustment (<br>    const vector&lt; Point3f &gt; points_3d,<br>    const vector&lt; Point2f &gt; points_2d,<br>    const Mat&amp; K,<br>    Mat&amp; R, Mat&amp; t )<br>{<br>    // 1. åˆå§‹åŒ–g2oï¼Œè®¾å®šçº¿æ€§æ–¹ç¨‹æ±‚è§£å™¨Blocksolverå’Œè¿­ä»£ç®—æ³•<br>    typedef g2o::BlockSolver&lt; g2o::BlockSolverTraits&lt;6,3&gt; &gt; Block;  // poseç»´åº¦ä¸º 6, è§‚æµ‹landmarkç»´åº¦ä¸º 3<br>    Block::LinearSolverType* linearSolver = new g2o::LinearSolverCSparse<a href="Block::PoseMatrixType">Block::PoseMatrixType</a>();<br>    Block* solver_ptr = new Block ( linearSolver ); </p><pre><code>g2o::OptimizationAlgorithmLevenberg* solver = new g2o::OptimizationAlgorithmLevenberg ( solver_ptr );//å›¾ä¼˜åŒ–ï¼Œè®¾ç½®æ±‚è§£å™¨g2o::SparseOptimizer optimizer;optimizer.setAlgorithm ( solver ); // 2.1 å›¾ä¸­å¢åŠ é¡¶ç‚¹ä½å§¿poseg2o::VertexSE3Expmap* pose = new g2o::VertexSE3Expmap(); // ç›¸æœºçš„æä»£æ•°ä½å§¿ï¼ŒVertexSE3Expmapç±»Eigen::Matrix3d R_mat;R_mat &lt;&lt;      R.at&lt;double&gt; ( 0,0 ), R.at&lt;double&gt; ( 0,1 ), R.at&lt;double&gt; ( 0,2 ),           R.at&lt;double&gt; ( 1,0 ), R.at&lt;double&gt; ( 1,1 ), R.at&lt;double&gt; ( 1,2 ),           R.at&lt;double&gt; ( 2,0 ), R.at&lt;double&gt; ( 2,1 ), R.at&lt;double&gt; ( 2,2 );pose-&gt;setId ( 0 );//ç›¸æœºä½å§¿ç±»å‹SE3Quat,å››å…ƒæ•°+ä½ç§»å‘é‡pose-&gt;setEstimate ( g2o::SE3Quat (                        R_mat,                        Eigen::Vector3d ( t.at&lt;double&gt; ( 0,0 ), t.at&lt;double&gt; ( 1,0 ), t.at&lt;double&gt; ( 2,0 ) )                    ) );optimizer.addVertex ( pose );// 2.2 å›¾ä¸­å¢åŠ é¡¶ç‚¹åæ ‡pointint index = 1;for ( const Point3f p:points_3d ) &#123;        g2o::VertexSBAPointXYZ* point = new g2o::VertexSBAPointXYZ();//ç©ºé—´ç‚¹ä½ç½®ç±»å‹ï¼ŒVertexSBAPointXYZ    point-&gt;setId ( index++ );    point-&gt;setEstimate ( Eigen::Vector3d ( p.x, p.y, p.z ) );    point-&gt;setMarginalized ( true ); // g2o ä¸­å¿…é¡»è®¾ç½® marg å‚è§ç¬¬åè®²å†…å®¹    optimizer.addVertex ( point );&#125; // ç›¸æœºå†…å‚Kï¼ŒCameraParametersç±»g2o::CameraParameters* camera = new g2o::CameraParameters (    K.at&lt;double&gt; ( 0,0 ), Eigen::Vector2d ( K.at&lt;double&gt; ( 0,2 ), K.at&lt;double&gt; ( 1,2 ) ), 0);camera-&gt;setId ( 0 );optimizer.addParameter ( camera ); // 3. å›¾ä¸­å¢åŠ è¾¹index = 1;for ( const Point2f p:points_2d )&#123;    g2o::EdgeProjectXYZ2UV* edge = new g2o::EdgeProjectXYZ2UV();//æŠ•å½±æ–¹ç¨‹è¾¹ç±»å‹EdgeProjectXYZ2UV    edge-&gt;setId ( index );    edge-&gt;setVertex ( 0, dynamic_cast&lt;g2o::VertexSBAPointXYZ*&gt; ( optimizer.vertex ( index ) ) );    edge-&gt;setVertex ( 1, pose );    edge-&gt;setMeasurement ( Eigen::Vector2d ( p.x, p.y ) );    edge-&gt;setParameterId ( 0,0 );    edge-&gt;setInformation ( Eigen::Matrix2d::Identity() );    optimizer.addEdge ( edge );    index++;&#125; //4. æ‰§è¡Œä¼˜åŒ–optimizer.initializeOptimization();optimizer.optimize ( 100 ); cout&lt;&lt;endl&lt;&lt;&quot;after optimization:&quot;&lt;&lt;endl;cout&lt;&lt;&quot;T=&quot;&lt;&lt;endl&lt;&lt;Eigen::Isometry3d ( pose-&gt;estimate() ).matrix() &lt;&lt;endl;</code></pre><p>}<br> VertexSE3Expmap</p><p>ç›¸æœºä½å§¿é¡¶ç‚¹ç±»VertexSE3Expmap<br>3Dè·¯æ ‡ç‚¹ç±»VertexSBAPointXYZ<br>é‡æŠ•å½±è¯¯å·®è¾¹ç±»EdgeProjectXYZ2UV<br>//ç»§æ‰¿äº† BaseVertex &lt;6, SE3Quat&gt; 6ç»´æä»£æ•°ï¼Œç›¸æœºä½å§¿SE3Quatæä»£æ•°<br>class G2O_TYPES_SBA_API VertexSE3Expmap : public BaseVertex&lt;6, SE3Quat&gt;{<br>public:<br>  EIGEN_MAKE_ALIGNED_OPERATOR_NEW<br>  //1. é»˜è®¤æ„é€ å‡½æ•°<br>  VertexSE3Expmap();<br>  //2. é‡ç½®å‡½æ•°<br>  virtual void setToOriginImpl() {<br>    <em>estimate = SE3Quat();<br>  }<br>  //3. æ›´æ–°å‡½æ•°<br>  virtual void oplusImpl(const double* update</em>)  {<br>    //æˆå‘˜å‡½æ•°Mapæ˜ å°„æˆ6ç»´å‘é‡<br>    Eigen::Map<const Vector6d> update(update_);<br>    //æä»£æ•°ä¸Šå¢é‡å·¦ä¹˜<br>    setEstimate(SE3Quat::exp(update)*estimate());<br>  }<br>  //4. å­˜ç›˜å’Œè¯»ç›˜ï¼šç•™ç©º<br>  bool read(std::istream&amp; is);<br>  bool write(std::ostream&amp; os) const;<br>};<br>EdgeProjectXYZ2UV::computeError()</p><p>//ç»§æ‰¿äº†BaseBinaryEdgeç±»ï¼Œè§‚æµ‹å€¼æ˜¯2ç»´ï¼Œç±»å‹Vector2D,<br>class G2O_TYPES_SBA_API EdgeProjectXYZ2UV : public  BaseBinaryEdge&lt;2, Vector2D, VertexSBAPointXYZ, VertexSE3Expmap&gt;{<br>  public:<br>    EIGEN_MAKE_ALIGNED_OPERATOR_NEW;<br>    //1. é»˜è®¤åˆå§‹åŒ–<br>    EdgeProjectXYZ2UV();<br>    //2. è®¡ç®—è¯¯å·®<br>    void computeError()  {<br>      //æä»£æ•°ç›¸æœºä½å§¿v1<br>      const VertexSE3Expmap* v1 = static_cast&lt;const VertexSE3Expmap*&gt;(_vertices[1]);<br>      // é¡¶ç‚¹v2<br>      const VertexSBAPointXYZ* v2 = static_cast&lt;const VertexSBAPointXYZ*&gt;(_vertices[0]);<br>      //ç›¸æœºå‚æ•°<br>      const CameraParameters * cam<br>        = static_cast&lt;const CameraParameters <em>&gt;(parameter(0));<br>     //è¯¯å·®è®¡ç®—ï¼Œæµ‹é‡å€¼å‡å»ä¼°è®¡å€¼ï¼Œä¹Ÿå°±æ˜¯é‡æŠ•å½±è¯¯å·®obs-cam<br>     //ä¼°è®¡å€¼è®¡ç®—æ–¹æ³•æ˜¯T</em>p,å¾—åˆ°ç›¸æœºåæ ‡ç³»ä¸‹åæ ‡ï¼Œç„¶ååœ¨åˆ©ç”¨camera2pixel()å‡½æ•°å¾—åˆ°åƒç´ åæ ‡ã€‚<br>      Vector2D obs(_measurement);<br>      _error = obs-cam-&gt;cam_map(v1-&gt;estimate().map(v2-&gt;estimate()));<br>    }<br>    //3. çº¿æ€§å¢é‡å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯é›…å…‹æ¯”çŸ©é˜µJçš„è®¡ç®—æ–¹æ³•<br>    virtual void linearizeOplus();<br>    //4. ç›¸æœºå‚æ•°<br>    CameraParameters * _cam;</p><pre><code>bool read(std::istream&amp; is);bool write(std::ostream&amp; os) const;</code></pre><p>};<br>.mapæ˜ å°„<br><em>error = <em>measurement - camera</em>-&gt;camera2pixel(pose-&gt;estimate().map(point</em>) );<br>é‡Œé¢æœ‰ä¸ªmap()å‡½æ•°ã€‚çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„æºç ï¼š</p><pre><code>  Vector3D map(const Vector3D &amp; xyz) const  &#123;    return _r*xyz + _t;  &#125;</code></pre><p> ä¼ å…¥ä¸€ä¸ª3Dç‚¹ï¼Œè¿”å›r*p+tï¼Œå¾ˆæ˜æ˜¾å°±æ˜¯æ±‚å˜æ¢åç‚¹çš„åæ ‡ã€‚<br>åœ¨g2oä¸­ï¼Œç”¨SE3Quatç±»å‹è¡¨ç¤ºå˜æ¢Tï¼Œæ­¤ç±»å‹ä¸­æœ‰ä¸ªæˆå‘˜å‡½æ•°å°±æ˜¯map()ï¼Œä½œç”¨ä¸ºå¯¹ä¸€ä¸ª3Dç‚¹è¿›è¡Œåæ ‡å˜æ¢ï¼Œ</p><p>EdgeProjectXYZ2UV::linearizeOplus()</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">void EdgeProjectXYZ2UVPoseOnly::linearizeOplus()&#123;    &#x2F;**     * è¿™é‡Œè¯´ä¸€ä¸‹æ•´ä½“æ€è·¯ï¼š     * é‡æŠ•å½±è¯¯å·®çš„é›…å…‹æ¯”çŸ©é˜µåœ¨ä¹¦ä¸­P164é¡µå¼7.45å·²ç»å‘ˆç°ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ˜¯ç›´æ¥æ„é€ ï¼Œ     * æ„é€ æ—¶å‘ç°éœ€è¦å˜æ¢åçš„ç©ºé—´ç‚¹åæ ‡ï¼Œæ‰€ä»¥éœ€è¦å…ˆæ±‚å‡ºã€‚     *&#x2F;    &#x2F;&#x2F;1. é¦–å…ˆè¿˜æ˜¯ä»é¡¶ç‚¹å–å‡ºä½å§¿    g2o::VertexSE3Expmap* pose &#x3D; static_cast&lt;g2o::VertexSE3Expmap*&gt; ( _vertices[1] );    &#x2F;&#x2F;2. è¿™ç”±ä½å§¿æ„é€ ä¸€ä¸ªå››å…ƒæ•°å½¢å¼T    g2o::SE3Quat T ( pose-&gt;estimate() );    &#x2F;&#x2F;3. ç”¨Tæ±‚å¾—å˜æ¢åçš„3Dç‚¹åæ ‡ã€‚T.mapï¼ˆpï¼‰å°±æ˜¯T*p    g2o::VertexSBAPointXYZ* point_ &#x3D; static_cast&lt;g2o::VertexSBAPointXYZ*&gt;(_vertices[0]);    Vector3d xyz_trans &#x3D; T.map ( point_ );    &#x2F;&#x2F;OKï¼Œåˆ°è¿™æ­¥ï¼Œå˜æ¢åçš„3Dç‚¹xyzåæ ‡å°±åˆ†åˆ«æ±‚å‡ºæ¥äº†ï¼Œåé¢çš„zå¹³æ–¹ï¼Œçº¯ç²¹æ˜¯ä¸ºäº†åé¢æ„é€ Jæ—¶æ–¹ä¾¿å®šä¹‰çš„ï¼Œå› ä¸ºéœ€è¦å¤šå¤„ç”¨åˆ°    double x &#x3D; xyz_trans[0];    double y &#x3D; xyz_trans[1];    double z &#x3D; xyz_trans[2];    double z_2 &#x3D; z*z;    &#x2F;&#x2F;4. ç›¸æœºå‚æ•°    const CameraParameters* cam&#x3D;static_cast&lt;const CameraParameters*&gt;(parameter(0));&#x2F;&#x2F;4. ç›´æ¥å„ä¸ªå…ƒç´ æ„é€ Jå°±å¥½äº†ï¼Œå¯¹ç…§å¼7.45æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œ2*6çš„çŸ©é˜µã€‚_jacobianOplusXi ( 0,0 ) &#x3D;  x*y&#x2F;z_2 *camera_-&gt;fx_;_jacobianOplusXi ( 0,1 ) &#x3D; - ( 1+ ( x*x&#x2F;z_2 ) ) *camera_-&gt;fx_;_jacobianOplusXi ( 0,2 ) &#x3D; y&#x2F;z * camera_-&gt;fx_;_jacobianOplusXi ( 0,3 ) &#x3D; -1.&#x2F;z * camera_-&gt;fx_;_jacobianOplusXi ( 0,4 ) &#x3D; 0;_jacobianOplusXi ( 0,5 ) &#x3D; x&#x2F;z_2 * camera_-&gt;fx_; _jacobianOplusXi ( 1,0 ) &#x3D; ( 1+y*y&#x2F;z_2 ) *camera_-&gt;fy_;_jacobianOplusXi ( 1,1 ) &#x3D; -x*y&#x2F;z_2 *camera_-&gt;fy_;_jacobianOplusXi ( 1,2 ) &#x3D; -x&#x2F;z *camera_-&gt;fy_;_jacobianOplusXi ( 1,3 ) &#x3D; 0;_jacobianOplusXi ( 1,4 ) &#x3D; -1.&#x2F;z *camera_-&gt;fy_;_jacobianOplusXi ( 1,5 ) &#x3D; y&#x2F;z_2 *camera_-&gt;fy_;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼š</p><p>1ã€ç›¸æœºä½å§¿é¡¶ç‚¹ç±»VertexSE3Expmapä½¿ç”¨äº†æä»£æ•°è¡¨ç¤ºç›¸æœºä½å§¿ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»çŸ©é˜µã€‚</p><p>è¿™æ˜¯å› ä¸ºæ—‹è½¬çŸ©é˜µæ˜¯æœ‰çº¦æŸçš„çŸ©é˜µï¼Œå®ƒå¿…é¡»æ˜¯æ­£äº¤çŸ©é˜µä¸”è¡Œåˆ—å¼ä¸º1ã€‚ä½¿ç”¨å®ƒä½œä¸ºä¼˜åŒ–å˜é‡å°±ä¼šå¼•å…¥é¢å¤–çš„çº¦æŸæ¡ä»¶ï¼Œä»è€Œå¢å¤§ä¼˜åŒ–çš„å¤æ‚åº¦ã€‚è€Œå°†æ—‹è½¬çŸ©é˜µé€šè¿‡æç¾¤-æä»£æ•°ä¹‹é—´çš„è½¬æ¢å…³ç³»è½¬æ¢ä¸ºæä»£æ•°è¡¨ç¤ºï¼Œå°±å¯ä»¥æŠŠä½å§¿ä¼°è®¡å˜æˆæ— çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚è§£éš¾åº¦é™ä½ã€‚</p><p>2ã€åœ¨é‡æŠ•å½±è¯¯å·®è¾¹ç±»EdgeProjectXYZ2UVä¸­ï¼Œå·²ç»ä¸ºç›¸æœºä½å§¿å’Œ3Dç‚¹åæ ‡æ¨å¯¼äº†é›…å…‹æ¯”çŸ©é˜µï¼Œä»¥è®¡ç®—è¿­ä»£çš„å¢é‡æ–¹å‘ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œtry_again_laterã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/try_again_later/article/details/81813639">https://blog.csdn.net/try_again_later/article/details/81813639</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1%E6%A6%82%E8%BF%B0/"/>
      <url>/2021/12/31/%E8%A7%86%E8%A7%89%E9%87%8C%E7%A8%8B%E8%AE%A1%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="è§†è§‰é‡Œç¨‹è®¡"><a href="#è§†è§‰é‡Œç¨‹è®¡" class="headerlink" title="è§†è§‰é‡Œç¨‹è®¡"></a>è§†è§‰é‡Œç¨‹è®¡</h1><p>â€‹        ä¸€ä¸ªSLAMç³»ç»Ÿåˆ†ä¸ºå‰ç«¯å’Œåç«¯ï¼Œå…¶ä¸­å‰ç«¯åˆç§°ä¸ºè§†è§‰é‡Œç¨‹è®¡ï¼Œä½œç”¨ä¸ºæ ¹æ®ç›¸é‚»å›¾åƒä¿¡æ¯æ¨æ–­ç›¸æœºè¿åŠ¨ï¼Œç»™åç«¯ä¸€ä¸ªè¾ƒå¥½çš„åˆå€¼ã€‚</p><h2 id="è§†è§‰é‡Œç¨‹è®¡åˆ†ç±»"><a href="#è§†è§‰é‡Œç¨‹è®¡åˆ†ç±»" class="headerlink" title="è§†è§‰é‡Œç¨‹è®¡åˆ†ç±»"></a>è§†è§‰é‡Œç¨‹è®¡åˆ†ç±»</h2><p>â€‹        ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå¤§ç±»ï¼Œç‰¹å¾ç‚¹æ³•ä¸ç›´æ¥æ³•ã€‚</p><h2 id="ç‰¹å¾ç‚¹æ³•"><a href="#ç‰¹å¾ç‚¹æ³•" class="headerlink" title="ç‰¹å¾ç‚¹æ³•"></a>ç‰¹å¾ç‚¹æ³•</h2><p>â€‹        è§’ç‚¹æå–ç®—æ³•æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚<strong>Harrisã€FASTã€GFTT</strong>ç­‰ï¼ˆä¸Šå¤ç®—æ³•ï¼‰ã€‚è®¡ç®—æœºè§†è§‰é¢†åŸŸå¸¸ç”¨ç‰¹å¾ç‚¹ï¼š<strong>SIFTã€SURFã€ORB</strong>ç­‰ã€‚è¿™äº›äººå·¥è®¾è®¡çš„ç‰¹å¾ç‚¹æœ‰æ›´å¥½çš„ç‰¹è´¨ï¼šå¯é‡å¤æ€§ã€å¯åŒºåˆ«æ€§ã€é«˜æ•ˆç‡ã€æœ¬åœ°æ€§ã€‚</p><p>â€‹        ç‰¹å¾ç‚¹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå…³é”®ç‚¹ï¼ˆKey-pointï¼‰ã€æè¿°å­ï¼ˆDescriptorï¼‰ã€‚</p><p>â€‹        <strong>SIFT</strong>ï¼ˆå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢ï¼ŒScale-Invariant Feature Transformï¼‰<br>â€‹            â€“å……åˆ†è€ƒè™‘å„ç§å› ç´ ï¼Œä½†è®¡ç®—é‡å¤§ã€‚<br>â€‹        <strong>ORB</strong>ï¼ˆOriented FAST and Rotated BRIEFï¼‰<br>â€‹            â€“æ”¹è¿›çš„FASTï¼Œé€Ÿåº¦å¿«ï¼Œå¾ˆæ— æ•Œã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/%E4%B8%89%E8%A7%92%E6%B5%8B%E9%87%8F/"/>
      <url>/2021/12/31/%E4%B8%89%E8%A7%92%E6%B5%8B%E9%87%8F/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/31/%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%952d-2d/"/>
      <url>/2021/12/31/%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%952d-2d/</url>
      
        <content type="html"><![CDATA[<h1 id="2D-2Dï¼šå¯¹æå‡ ä½•"><a href="#2D-2Dï¼šå¯¹æå‡ ä½•" class="headerlink" title="2D-2Dï¼šå¯¹æå‡ ä½•"></a>2D-2Dï¼šå¯¹æå‡ ä½•</h1><h2 id="ä¸ªäººç†è§£"><a href="#ä¸ªäººç†è§£" class="headerlink" title="ä¸ªäººç†è§£"></a>ä¸ªäººç†è§£</h2><p>å¯¹æå‡ ä½•æ˜¯<strong>åŒè§†å›¾</strong>ä¹‹é—´å†…åœ¨çš„å°„å½±å‡ ä½•ã€‚å®ƒç‹¬ç«‹äºæ™¯ç‰©ç»“æ„ï¼Œåªä¾èµ–äºæ‘„åƒæœºçš„å†…å‚å¤–å‚ã€‚</p><p>é€‚ç”¨èŒƒå›´ï¼šæœ‰å‰åä¸¤å¸§ç›¸æœºå›¾åƒï¼Œä½†æ˜¯æ²¡æœ‰æ·±åº¦ä¿¡æ¯</p><h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><p><img src=".%5Ctemp%5Cepipolar1.png" class="lazyload placeholder" data-srcset=".%5Ctemp%5Cepipolar1.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="img"></p><p>ä¸Šå›¾aä¸­ä¸¤ä¸ªæ‘„åƒæœºçš„ä¸­å¿ƒåˆ†åˆ«æ˜¯Cä¸Câ€™ï¼Œè€ŒXä¸ºä¸€ä¸ªä¸‰ç»´ç©ºé—´ç‚¹ï¼Œå®ƒåœ¨ä¸¤ä¸ªæ‘„åƒæœºçš„æˆåƒå¹³é¢ä¸Šçš„æŠ•å½±ç‚¹åˆ†åˆ«æ˜¯xä¸xâ€™ã€‚æˆ‘ä»¬å¸¸ç§°ï¼š</p><ul><li><strong>åŸºçº¿</strong>ï¼šä¸¤ä¸ªæ‘„åƒæœºå…‰å¿ƒçš„è¿çº¿CCâ€²CCâ€²</li><li><strong>å¯¹æç‚¹</strong>ï¼šä¸Šå›¾bä¸­çš„eä¸eâ€™ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ä¸€å¹…è§†å›¾ä¸­å¦ä¸€ä¸ªæ‘„åƒæœºä¸­å¿ƒçš„åƒã€‚äºŒç»´è¡¨ç¤ºä¸ºåŸºçº¿CCâ€²CCâ€²ä¸ä¸¤ä¸ªæˆåƒå¹³é¢çš„äº¤ç‚¹ã€‚</li><li><strong>å¯¹æå¹³é¢</strong>ï¼šæ˜¯ä¸€å¼ åŒ…å«åŸºçº¿çš„å¹³é¢ï¼Œå­˜åœ¨ç€å¯¹æå¹³é¢çš„ä¸€ä¸ªé›†åˆï¼ˆä»¥åŸºçº¿ä¸ºè½´è½¬åŠ¨ï¼‰ï¼Œä¸Šå›¾ä¸­çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯CXCâ€²CXCâ€²ã€‚</li><li><strong>å¯¹æçº¿</strong>ï¼šå¯¹æå¹³é¢ä¸å›¾åƒå¹³é¢çš„äº¤çº¿ã€‚ä¸Šå›¾ä¸­çš„ä¾‹å­æ˜¯$xe$ä¸$xâ€™eâ€™$ï¼Œä¸€ä¸ªæˆåƒå¹³é¢ä¸Šçš„æ‰€æœ‰çš„å¯¹æçº¿ç›¸äº¤äºå¯¹æç‚¹ã€‚</li></ul><blockquote><p>ä¸Šå›¾ä¸­è¿˜ä½“ç°äº†ä¸€äº›æ€§è´¨ï¼Œå¯¹äºä¸€å¹…å›¾åƒä¸Šçš„æ¯ä¸€ç‚¹xï¼Œåœ¨ç¬¬äºŒå¹…å›¾åƒä¸Šï¼Œä»»ä½•ä¸è¯¥ç‚¹xåŒ¹é…çš„ç‚¹xâ€™å¿…ç„¶åœ¨å¯¹æçº¿Iâ€™ä¸Šï¼Œè¯¥å¯¹æçº¿æ˜¯è¿‡ç‚¹xä¸ç¬¬ä¸€ä¸ªæ‘„åƒæœºä¸­å¿ƒCçš„å°„çº¿åœ¨ç¬¬äºŒå¹…å›¾åƒä¸Šçš„æŠ•å½±ã€‚</p></blockquote><h2 id="å¯¹æçº¦æŸ"><a href="#å¯¹æçº¦æŸ" class="headerlink" title="å¯¹æçº¦æŸ"></a>å¯¹æçº¦æŸ</h2><h3 id="ä¸€ä¸ªå…¬å¼æ€»ç»“"><a href="#ä¸€ä¸ªå…¬å¼æ€»ç»“" class="headerlink" title="ä¸€ä¸ªå…¬å¼æ€»ç»“"></a>ä¸€ä¸ªå…¬å¼æ€»ç»“</h3><p>$$<br>x_{2}^T t^{\land} R x_1 = 0ï¼ˆx1,x2æ˜¯å½’ä¸€åŒ–å¹³é¢ä¸Šçš„åæ ‡ï¼‰<br>$$</p><h3 id="å¯¹æçº¦æŸçš„æ¨å¯¼"><a href="#å¯¹æçº¦æŸçš„æ¨å¯¼" class="headerlink" title="å¯¹æçº¦æŸçš„æ¨å¯¼"></a>å¯¹æçº¦æŸçš„æ¨å¯¼</h3><p>ä»ç›¸æœºæ¨¡å‹çš„å­¦ä¹ ä¸­æˆ‘ä»¬å¯ä»¥ç†è§£å¦‚ä¸‹çš„å…¬å¼(å‡å®šç¬¬ä¸€å¸§å³ä¸–ç•Œåæ ‡ç³»)ï¼š<br>$$<br>Z_1p_1 = KP_w<br>$$</p><p>$$<br>Z_2p_2 = K(RP_w + t)<br>$$<br>å…¶ä¸­Kæ˜¯ç›¸æœºå†…å‚ï¼ŒRä¸tæ˜¯ç¬¬äºŒä¸ªç›¸æœºåœ¨ç¬¬ä¸€ä¸ªç›¸æœºçš„ç›¸æœºåæ ‡ç³»ä¸‹çš„å¤–å‚ï¼Œ$P_w$æ˜¯æ­¤ç©ºé—´ç‚¹åœ¨ç¬¬ä¸€ä¸ªç›¸æœºçš„ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ã€‚Zæ˜¯ç©ºé—´ç‚¹åˆ°ç›¸æœºå…‰å¿ƒçš„è·ç¦»(ä¹Ÿæ˜¯ç›¸æœºåæ ‡ç³»ä¸‹çš„zè½´åæ ‡)ã€‚$p_1$ä¸$p_2$æ˜¯ç©ºé—´ç‚¹$P_w$åœ¨ä¸¤ä¸ªç›¸æœºå¹³é¢ä¸Šçš„æŠ•å½±ç‚¹ã€‚</p><ul><li><p>é¦–å…ˆåšå‡ºå¦‚ä¸‹å®šä¹‰ï¼ˆå…¶ä¸­x1ä¸x2æ˜¯å½’ä¸€åŒ–çš„ç›¸æœºåæ ‡ï¼ˆX/Z,Y/Z,1ï¼‰ï¼‰ï¼š<br>$$<br>x_1 = K^{-1}p_1\quad,\quad x_2 = K^{-1}p_2<br>$$</p></li><li><p>å¸¦å…¥å¦‚ä¸Šå®šä¹‰å¯å¾—ï¼š<br>$$<br>Z_2 x_2 = Z_1 Rx_1 + t<br>$$</p></li><li><p>ä¸Šå¼ä¸¤è¾¹åŒæ—¶å·¦ä¹˜<code>t^</code>ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¾§åŒæ—¶ä¸tåšå¤–ç§¯ï¼š<br>$$<br>Z_2 t^{\land} x_2 = Z_1 t^{\land} R x_1<br>$$</p></li><li><p>ä¸¤ä¾§åŒæ—¶å·¦ä¹˜$x^T_2$ï¼š<br>$$<br>Z_2 x_{2}^T t^{\land} x_2 = Z_1 x_{2}^T t^{\land} R x_1<br>$$</p></li><li><p>ä¸Šå¼ä¸­ç”±äºç­‰å¼å·¦ä¾§$t^{\land} x_2$æ˜¯ä¸€ä¸ªä¸tã€x2éƒ½å‚ç›´çš„å‘é‡ï¼Œå†å’Œx2åšå†…ç§¯å°†å¾—åˆ°0ï¼Œå› æ­¤ä¸Šå¼å­å…¶å®å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š<br>$$<br>x_{2}^T t^{\land} R x_1 = 0<br>$$</p></li><li><p>ä¸Šå¼å°±æ˜¯å¤§åé¼é¼çš„<strong>å¯¹æçº¦æŸ</strong>ï¼Œå°† x1 ä¸ x2 æ¢ä¸‹ï¼Œé‡æ–°å¸¦å…¥ p1 ä¸ p2 å¯å¾—ï¼š<br>$$<br>p_2^T K^{-T} t^{\land} R K^{-1} p_1 = 0<br>$$<br>ç”±å¯¹æçº¦æŸçš„ä¸¤ç§å½¢æ€å¯ä»¥å¯¼å‡ºä¸¤ç§çŸ©é˜µï¼š</p></li><li><p><strong>æœ¬è´¨çŸ©é˜µ</strong>æ˜¯åŸºç¡€çŸ©é˜µä¸­åªä¸å¤–å‚ç›¸å…³çš„éƒ¨åˆ†ï¼Œå³å»æ‰ç›¸æœºå†…å‚ï¼Œå¯ä»¥å¾—åˆ°ï¼š<br>$$<br>E = t^{\land} R<br>$$</p></li></ul><p>$$<br>x_{2}^T E R x_1 = 0<br>$$</p><ul><li><strong>åŸºç¡€çŸ©é˜µ</strong>ï¼Œå¦‚ä¸‹ï¼š<br>$$<br>F = K_2^{-T} E K_1^{-1}<br>$$</li></ul><p>$$<br>p_{uv2}^T F p_{uv1} = 0<br>$$</p><blockquote><p>æ­¤å¤„æ³¨æ„ï¼Œå½“ç‚¹p1ä¸åŸºç¡€çŸ©é˜µFç¡®å®šæ—¶ï¼Œä¸Šå¼æ¼”å˜æˆä¸€ä¸ªç›´çº¿æ–¹ç¨‹ï¼Œæ›´å¥½çš„è¯ é‡Šäº†åŸºç¡€çŸ©é˜µçš„æœ¬è´¨æ˜¯<strong>ä»ä¸€ä¸ªç‚¹åˆ°ä¸€æ¡ç›´çº¿çš„å°„å½±æ˜ å°„çš„ä»£æ•°è¡¨ç¤ºã€‚</strong></p></blockquote><h2 id="æœ¬è´¨çŸ©é˜µæ±‚è§£"><a href="#æœ¬è´¨çŸ©é˜µæ±‚è§£" class="headerlink" title="æœ¬è´¨çŸ©é˜µæ±‚è§£"></a>æœ¬è´¨çŸ©é˜µæ±‚è§£</h2><h3 id="ä»£æ•°æ–¹æ³•"><a href="#ä»£æ•°æ–¹æ³•" class="headerlink" title="ä»£æ•°æ–¹æ³•"></a>ä»£æ•°æ–¹æ³•</h3><p>ç†è®ºä¸Š6-1è‡ªç”±åº¦åªéœ€è¦5ç‚¹å³å¯æ±‚è§£ï¼Œä½†æ˜¯å®ç°æ¯”è¾ƒå›°éš¾ï¼Œæ›´å¤šç”¨EçŸ©é˜µçš„çº¿æ€§æ€§è´¨ï¼Œä¹Ÿå°±æ˜¯<strong>å…«ç‚¹æ³•</strong>ï¼ˆEight-point-algorithmï¼‰</p><p>å°†æœ¬è´¨çŸ©é˜µå½¢å¼çš„å¯¹æçº¦æŸæ–¹ç¨‹ $x_{2}^T E R x_1 = 0$ å†™æˆçº¿æ€§å½¢å¼<br>$$<br>\left(\begin{array}{ccccccccc}<br>u_{2}^{1} u_{1}^{1} &amp; u_{2}^{1} v_{1}^{1} &amp; u_{2}^{1} &amp; v_{2}^{1} u_{1}^{1} &amp; v_{2}^{1} v_{1}^{1} &amp; v_{2}^{1} &amp; u_{1}^{1} &amp; v_{1}^{1} &amp; 1 \<br>u_{2}^{2} u_{1}^{2} &amp; u_{2}^{2} v_{1}^{2} &amp; u_{2}^{2} &amp; v_{2}^{2} u_{1}^{2} &amp; v_{2}^{2} v_{1}^{2} &amp; v_{2}^{2} &amp; u_{1}^{2} &amp; v_{1}^{2} &amp; 1 \<br>\vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \<br>u_{2}^{8} u_{1}^{8} &amp; u_{2}^{8} v_{1}^{8} &amp; u_{2}^{8} &amp; v_{2}^{8} u_{1}^{8} &amp; v_{2}^{8} v_{1}^{8} &amp; v_{2}^{8} &amp; u_{1}^{8} &amp; v_{1}^{8} &amp; 1<br>\end{array}\right)\left(\begin{array}{c}<br>e_{1} \<br>e_{2} \<br>e_{3} \<br>e_{4} \<br>e_{5} \<br>e_{6} \<br>e_{7} \<br>e_{8} \<br>e_{9}<br>\end{array}\right)=0<br>$$<br>ç³»æ•°çŸ©é˜µæ»¡ç§©æ—¶ï¼Œé›¶ç©ºé—´ç»´åº¦ä¸º1ï¼Œè¿™ä¸eçš„<strong>å°ºåº¦ç­‰ä»·æ€§</strong>æ˜¯ä¸€è‡´çš„ã€‚</p><p>ä»Eæ¢å¤åˆ°Rï¼Œtï¼Œå¯ä»¥ä½¿ç”¨SVDåˆ†è§£å¾—åˆ°å¦‚ä¸‹ç­‰å¼ğŸ‘‡<br>$$<br>\boldsymbol{E}=\boldsymbol{U} \boldsymbol{\Sigma} \boldsymbol{V}^{\mathrm{T}}<br>$$</p><p>å…¶ä¸­Uå’ŒVæ˜¯æ­£äº¤é˜µï¼Œä¸­é—´Î£æ˜¯å¥‡å¼‚å€¼çŸ©é˜µã€‚æ ¹æ®Eçš„å†…åœ¨æ€§è´¨ï¼Œæˆ‘ä»¬çŸ¥é“$Î£ = diag(Î¼,Î¼,0)$ã€‚é€šè¿‡SVDåˆ†è§£ï¼Œä»»æ„ä¸€ä¸ªEï¼Œå­˜åœ¨ä¸¤ä¸ªå¯èƒ½çš„Rå’Œtä¸å…¶å¯¹åº”ã€‚<br>$$<br>t_{1}^{\wedge}=U R_{Z}\left(\frac{\pi}{2}\right) \Sigma U^{\mathrm{T}}, \quad<br>R_{1}=U R_{Z}^{\mathrm{T}}\left(\frac{\pi}{2}\right) V^{\mathrm{T}}  \<br>t_{2}^{\wedge}=U R_{Z}\left(-\frac{\pi}{2}\right) \Sigma U^{\mathrm{T}}, \quad<br>R_{2}=U R_{Z}^{\mathrm{T}}\left(-\frac{\pi}{2}\right) V^{\mathrm{T}}<br>$$<br>å…¶ä¸­$R_{Z}\left(\frac{\pi}{2}\right)$è¡¨ç¤ºæ²¿Zè½´æ—‹è½¬90Â°å¾—åˆ°çš„æ—‹è½¬çŸ©é˜µã€‚åŒæ—¶ç”±äºEæ— è®ºæ˜¯å¦å–ç¬¦å·éƒ½æ˜¯ç­‰ä»·çš„ï¼Œå› æ­¤å¯¹ä¸Šé¢å¾—åˆ°çš„tå–è´Ÿå·ä¹Ÿä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å› æ­¤æ¯ä¸ªEé€šè¿‡åˆ†è§£ä¸€å…±æœ‰å››ç§å¯èƒ½çš„è§£ã€‚</p><h3 id="è¶…å®šæ–¹æ³•ï¼ˆå¢åŠ é²æ£’æ€§ï¼‰"><a href="#è¶…å®šæ–¹æ³•ï¼ˆå¢åŠ é²æ£’æ€§ï¼‰" class="headerlink" title="è¶…å®šæ–¹æ³•ï¼ˆå¢åŠ é²æ£’æ€§ï¼‰"></a>è¶…å®šæ–¹æ³•ï¼ˆå¢åŠ é²æ£’æ€§ï¼‰</h3><ol><li>æ„å»ºæœ€å°äºŒä¹˜</li><li>RANSACï¼ˆRandom Sample Consensusï¼‰éšæœºé‡‡æ ·ä¸€è‡´æ€§æ±‚è§£ï¼Œè¿™æ˜¯æ›´é€šç”¨çš„æ–¹æ³•</li></ol><h2 id="å•åº”çŸ©é˜µ"><a href="#å•åº”çŸ©é˜µ" class="headerlink" title="å•åº”çŸ©é˜µ"></a>å•åº”çŸ©é˜µ</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/12/31/hello-world/"/>
      <url>/2021/12/31/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
